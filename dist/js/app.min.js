"use strict";var form=document.querySelector("#form"),films=document.querySelector("#films"),film_name_input=document.querySelector("#film_name"),film_director_input=document.querySelector("#film_director"),delete_all_button=document.querySelector("#delete_all_button"),eventListeners=function(){form.addEventListener("submit",addFilm),films.addEventListener("click",deleteFilm),delete_all_button.addEventListener("click",deleteAllFilms),document.addEventListener("DOMContentLoaded",loadFilms)},addFilm=function(e){e.preventDefault();var t=new Film(film_name_input.value,film_director_input.value);t.createElement();UI.addFilm(t),Storage.addFilm(t),clearInputs(film_name_input,film_director_input)},deleteFilm=function(e){"delete_film_button"===e.target.id&&(UI.deleteFilm(e.target),Storage.deleteFilm(e.target))},clearInputs=function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];t.forEach(function(e){return e.value=""})},deleteAllFilms=function(){confirm("All films will be deleted. Are you sure?")&&(UI.deleteAllFilms(),Storage.deleteAllFilms())},loadFilms=function(){UI.loadFilms()},validate=function(){film_director_input.value=film_director_input.value.replace(/[^a-zA-Z ]+/,"")};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}eventListeners();var Film=function(){function l(e,t){_classCallCheck(this,l),this.name=e,this.director=t}return _createClass(l,[{key:"createElement",value:function(){return'<li class="list-group-item">\n        <h4>'.concat(this.name,"</h4>\n        <p>").concat(this.director,'</p>\n        <button id="delete_film_button" class="btn btn-sm btn-danger">Delete</button>\n        </li>')}}]),l}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}var Storage=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getFilms",value:function(){var e=localStorage.getItem("films")?JSON.parse(localStorage.getItem("films")):[];return e}},{key:"addFilm",value:function(e){var t=this.getFilms();t.push(e),localStorage.setItem("films",JSON.stringify(t))}},{key:"deleteFilm",value:function(e){var l=e.parentElement.firstElementChild.textContent,n=this.getFilms();n.forEach(function(e,t){e.name===l&&n.splice(t,1)}),localStorage.setItem("films",JSON.stringify(n))}},{key:"deleteAllFilms",value:function(){localStorage.removeItem("films")}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}var UI=function(){function l(){_classCallCheck(this,l)}return _createClass(l,null,[{key:"addFilm",value:function(e){films.innerHTML+=e.createElement(e.name,e.director)}},{key:"deleteFilm",value:function(e){e.parentElement.remove()}},{key:"deleteAllFilms",value:function(){for(;films.firstElementChild;)films.firstElementChild.remove()}},{key:"loadFilms",value:function(){Storage.getFilms().forEach(function(e){var t=new Film(e.name,e.director);l.addFilm(t)})}}]),l}();